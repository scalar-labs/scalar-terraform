# Bastion AWS Module

The bastion module deploys a network bastion host used to access and configure the environment.

## Inputs

| Name                        | Description                                                                                 | Type          | Default | Required |
| --------------------------- | ------------------------------------------------------------------------------------------- | ------------- | ------- | :------: |
| bastion_access_cidr         | You can limit access to the bastion node to a specified IP cidr range                       | `any`         | n/a     |   yes    |
| custom_tags                 | The map of custom tags                                                                      | `map(string)` | `{}`    |    no    |
| enable_tdagent              | A flag to install td-agent that forwards logs to the monitor host                           | `any`         | n/a     |   yes    |
| image_id                    | The image id to initiate                                                                    | `any`         | n/a     |   yes    |
| internal_domain             | The internal domain for setting srv record                                                  | `any`         | n/a     |   yes    |
| network_cidr                | The network cidr address space                                                              | `any`         | n/a     |   yes    |
| network_dns                 | The ID for the internal DNS zone                                                            | `any`         | n/a     |   yes    |
| network_id                  | The id of the cloud provider network ID resource                                            | `any`         | n/a     |   yes    |
| network_name                | The name of the network resources: should be generated by provider/universal/name-generator | `any`         | n/a     |   yes    |
| private_key_path            | The path to the private key for SSH access                                                  | `any`         | n/a     |   yes    |
| public_key_path             | The path to the public key for SSH access                                                   | `any`         | n/a     |   yes    |
| additional_public_keys_path | The path to a file that contains multiple public keys for SSH access.                       | `any`         | `""`    |    no    |
| resource_count              | The number of bastion resources to create                                                   | `any`         | n/a     |   yes    |
| resource_root_volume_size   | The root volume size of bastion instance                                                    | `any`         | n/a     |   yes    |
| resource_type               | The resource type of the bastion instance                                                   | `any`         | n/a     |   yes    |
| subnet_ids                  | The subnet IDs to launch bastion host. Should be a public subnet                            | `any`         | n/a     |   yes    |
| trigger                     | A trigger key that will initiate provisioning of bastion resource                           | `string`      | `""`    |    no    |
| user_name                   | The user name of the remote hosts                                                           | `any`         | n/a     |   yes    |

## Outputs

| Name                      | Description                                    |
| ------------------------- | ---------------------------------------------- |
| bastion_host_ids          | A list of bastion hosts' IDs.                  |
| bastion_host_ips          | A list of bastion hosts' IP addresses.         |
| bastion_provision_id      | The provision id of bastion.                   |
| bastion_security_group_id | The security group ID of the bastion resource. |
| key_name                  | The key-name of the AWS managed ssh key_pair.  |
